<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Dashboard | To-Do App</title>

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>

    body {
        margin: 0;
        padding: 0;
        font-family: "Poppins", sans-serif;
        background: #f1f3f8;
        display: flex;
        height: 100vh;
    }
	h2{
		margin-left: 15px;
	}

    /* SIDEBAR */
    .sidebar {
        width: 240px;
        background: linear-gradient(180deg, #2575fc, #6a11cb);
        color: #fff;
        height: 94vh;
        padding: 30px 20px;
        box-shadow: 2px 0 10px rgba(0,0,0,0.2);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .sidebar-menu a {
        display: block;
        padding: 12px 15px;
        color: #fff;
        text-decoration: none;
        margin-bottom: 12px;
        border-radius: 6px;
        transition: 0.3s;
        font-size: 15px;
        font-weight: 500;
    }

    .sidebar-menu a:hover {
        background: rgba(255,255,255,0.2);
        transform: scale(1.03);
    }

    .sidebar i {
        margin-right: 12px;
    }

    /* LOGOUT BUTTON FIXED AT BOTTOM */
    .logout-btn {
        margin-top: auto;
        padding: 12px;
        background: #ff4d4d;
        text-align: center;
        color: #fff !important;
        border-radius: 6px;
        font-weight: 600;
        text-decoration: none;
        transition: 0.3s;
    }

    .logout-btn:hover {
        background: #e60000;
        transform: scale(1.05);
    }

    
    /* MAIN CONTENT */
    .main {
        flex: 1;
        padding: 30px;
        display: flex;
        flex-direction: column;
    }

    .header {
        font-size: 24px;
        font-weight: 600;
        color: #333;
        margin-bottom: 20px;
    }


    /* CARDS */
    .cards {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
    }

    .card {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        width: 220px;
        text-align: center;
    }

    .card i {
        font-size: 28px;
        color: #6a11cb;
        margin-bottom: 10px;
    }

    .card h3 {
        margin: 0;
        font-size: 18px;
        color: #444;
    }

    .card p {
        font-size: 26px;
        font-weight: bold;
        margin-top: 10px;
        color: #2575fc;
    }


    /* ADD TASK BUTTON */
    .add-task-btn {
        background: linear-gradient(135deg, #2575fc, #6a11cb);
        color: #fff;
        padding: 12px 18px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 15px;
        font-weight: 600;
        transition: 0.3s;
        width: 180px;
        margin-bottom: 20px;
    }

    .add-task-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 18px rgba(0,0,0,0.2);
    }


    /* TASK TABLE */
    table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    th, td {
        padding: 12px;
        border-bottom: 1px solid #e5e5e5;
        font-size: 15px;
    }

    th {
        background: #f4f6fb;
        color: #333;
        text-align: left;
    }


    /* FOOTER */
	.footer { text-align: center; margin-top: auto; padding: 10px; font-size: 13px; color: #777; }

</style>

</head>
<body>

<!-- SIDEBAR -->
<div class="sidebar">
	
    <div>
        <h2>To-Do App</h2>

        <div class="sidebar-menu">
            <a th:href="@{/dashboard}">
                <i class="fas fa-home"></i> Dashboard
            </a>

            <a th:href="@{/task/new}">
                <i class="fas fa-plus-circle"></i> Add Task
            </a>

            <a th:href="@{/tasks}">
                <i class="fas fa-list"></i> All Tasks
            </a>
        </div>
    </div>

    <!-- LOGOUT at Bottom -->
    <a th:href="@{/logout}" class="logout-btn">
        <i class="fas fa-sign-out-alt"></i> Logout
    </a>

</div>


<!-- MAIN CONTENT -->
<div class="main">

    <div class="header">Hello, <span th:text="${name}">User</span> üëã</div>


    <!-- CARDS -->
    <div class="cards">

        <div class="card">
            <i class="fas fa-clipboard-list"></i>
            <h3>Total Tasks</h3>
            <p th:text="${totalTasks}">0</p>
        </div>

        <div class="card">
            <i class="fas fa-check-circle"></i>
            <h3>Completed</h3>
            <p th:text="${completedTasks}">0</p>
        </div>

        <div class="card">
            <i class="fas fa-hourglass-half"></i>
            <h3>Pending</h3>
            <p th:text="${pendingTasks}">0</p>
        </div>

    </div>


    <!-- SUCCESS MESSAGE -->
    <p th:if="${msg}" th:text="${msg}" style="color:green; font-weight:600; text-align:center;"></p>


    <!-- ADD TASK BUTTON -->
    <button class="add-task-btn" onclick="window.location.href='/task/new'">
        + Add Task
    </button>


    <!-- TASK TABLE -->
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Task</th>
                <th>Description</th>
                <th>Date</th>
                <th>Time</th>
                <th>Status</th>
                <th>Edit</th>
            </tr>
        </thead>

        <tbody>
            <tr th:each="task : ${recentTasks}">
                <td th:text="${task.taskId}"></td>
                <td th:text="${task.name}"></td>
                <td th:text="${task.description}"></td>
				<td th:text="${#temporals.format(task.date, 'dd/MM/yyyy')}"></td>
                <td th:text="${task.timings}"></td>
                <td th:text="${task.status}"></td>

                <td>
                    <a th:href="@{'/task/edit/' + ${task.taskId}}"
                       style="color:white; background:#2575fc; padding:6px 12px; 
                       border-radius:6px; text-decoration:none;">
                        Edit
                    </a>
                </td>
            </tr>
        </tbody>
    </table>
	
	<!-- PAGINATION -->
	<div style="text-align:center; margin-top:20px;">

	    <!-- Prev -->
	    <a th:if="${currentPage > 0}"
	       th:href="@{/dashboard(page=${currentPage - 1})}"
	       style="padding:8px 14px; background:#2575fc; color:white;
	       text-decoration:none; border-radius:5px; margin-right:10px;">
	       ‚Äπ Prev
	    </a>

	    <span style="font-weight:bold;">
	        Page <span th:text="${currentPage + 1}"></span> of
	        <span th:text="${totalPages}"></span>
	    </span>

	    <!-- Next -->
	    <a th:if="${currentPage + 1 < totalPages}"
	       th:href="@{/dashboard(page=${currentPage + 1})}"
	       style="padding:8px 14px; background:#2575fc; color:white;
	       text-decoration:none; border-radius:5px; margin-left:10px;">
	       Next ‚Ä∫
	    </a>

	</div>



	<footer class="footer">
	    <p>¬© 2025 To-Do App ‚Äî Designed with ‚ù§Ô∏è for Productivity</p>
	</footer>

</div>

</body>
</html>
